# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
   2 pkgname=sevmonster-keys
   3 pkgver=1
   4 pkgrel=0
   5 pkgdesc="Public keys for alpine.sev.monster packages"
   6 url="https://alpine.sev.monster"
   7 # we install arch specific keys to /etc so we cannot do arch=noarch
   8 arch="all"
   9 license="BSD-3-Clause"
  10 options="!check"
  11 
  12 _arch_keys="x86_64:alpine@sev.monster-60eb1287.rsa.pub"
  13 
  14 for _i in $_arch_keys; do
  15         source="$source ${_i#*:}"
  16 done
  17 
  18 _ins_key() {
  19         msg "- $2 ($1)"
  20         install -Dm644 "$srcdir"/$2 "$pkgdir"/etc/apk/keys/$2
  21 }
  22 
  23 _install_x86() {
  24         case "$1" in
  25         x86*) _ins_key $1 $2 ;;
  26         esac
  27 }
  28 
  29 package() {
  30         # copy keys for repos
  31         mkdir -p "$pkgdir"/etc/apk/keys
  32         for i in $_arch_keys; do
  33                 _archs="${i%:*}"
  34                 _key="${i#*:}"
  35                 install -Dm644 "$srcdir"/$_key \
  36                         "$pkgdir"/usr/share/apk/keys/$_key
  37 
  38                 for _arch in ${_archs//,/ }; do
  39                         mkdir -p "$pkgdir"/usr/share/apk/keys/$_arch
  40                         ln -s ../$_key "$pkgdir"/usr/share/apk/keys/$_arch/
  41 
  42                         case "$CARCH" in
  43                         x86*) _install_x86 $_arch $_key ;;
  44                         esac
  45                 done
  46         done
  47 }
  48 
  49 sha512sums="
  50 c36281116bad0c8c0c5e24b09366e9a238d68d7ead69167da8601e05951f895a007838e45d003aac1e5c10c3db52be6f4e2dc1d583f5eab3912ac26a8423819a  alpine@sev.monster-60eb1287.rsa.pub
