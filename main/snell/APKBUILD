# Contributor: ai <apk@ai.com>
# Maintainer: ai <apk@ai.com>
pkgname=snell-server
pkgver=4.0.1
pkgrel=0
pkgdesc="Snell is a lean encrypted proxy protocol developed by surge team"
url="https://manual.nssurge.com/others/snell.html"
_update_url="https://dl.nssurge.com/snell/"
arch="x86_64"
license="nonfree"
options="net"
depends="glibc glibc-bin"
source="
$pkgname-v$pkgver.zip::$_update_url/$pkgname-v$pkgver-linux-amd64.zip
$pkgname.initd
$pkgname.conf
"

check() {
	./snell-server --version
}

package() {
	# snell-server
	install -m755 -D "$srcdir"/snell-server "$pkgdir"/usr/bin/snell-server
        install -Dm755 "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
        install -Dm644 "$srcdir"/$pkgname.conf -t "$pkgdir"/etc/$pkgname
}
sha512sums="
407f5316040a69a5a9c48412d7bcea08e0722efaeaab1fd5672df9975721ff992365ce90f3be92b3baed599d78c0df5bb0bdcbc12c853e8b5777326ede1cd86c  snell-server-v4.0.1.zip
cffed4fe0cba272288216e637abe2a83d41993600192e35e25e2d68eaf39b6eb69de38bd2f7ae80ff8cbaff836d696e979a1ae70242cbb64ee77ca451308f716  snell-server.initd
7223fdf8718a9c52e2685d496321ded1a436e181122bf2f93b044148cf9c30cd32c5f883dea81b4436814c8f067472323b10d22d92a16e9a336b86a97c3ed09a  snell-server.conf
"
